<!DOCTYPE html>
<html>
	<head>
		<meta charset="ISO-8859-1">
		<title>My Profile</title>
		<link rel="stylesheet" type="text/css" th:href="@{/myProfile.css}">
		<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 
	</head>
	<body>
	    <nav>
	    	<h2>LIKEWAVE</h2>
	 		<a href="/goHome"><button>Home <i class='bx bx-home-heart'></i></button></a>
	        <a href="/openCreatePost"><button>Create post <i class='bx bxs-image-add'></i></button></a>
	        <a href="/openMyProfile"><button>My profile <i class='bx bxs-user-circle' ></i></button></a>
	        <button><span th:text="${session.username}"></span></button>
	    </nav>
	  	
	  	<div class="profile-header">
	    	<div class="profile-picture">
	    		<img th:if="${user.photoBase64}" th:src="'data:image/jpeg;base64,' + ${user.photoBase64}" 
	         			alt="Profile Photo" onclick="openModal();" style="cursor: pointer;" />
			</div>
	
			<div id="imageModal" class="modal">
			    <span class="close" onclick="closeModal()">&times;</span>
			    <img class="modal-content" id="fullImage">
			</div>
	
	        <div class="username">
	            <h1 th:text="${user.username}"></h1>
	        </div>
	    </div>
	
	    <div class="profile-content">
	        <div class="profile-info">
	            <ul>
	                <li><i class="fas fa-calendar-alt"></i> Date of Birth: <span th:text="${user.dob}"></span></li>
	                <li><i class="fas fa-venus-mars"></i> Gender: <span th:text="${user.gender}"></span></li>
	                <li><i class="fas fa-map-marker-alt"></i> City: <span th:text="${user.city}"></span></li>
	                <li><i class="fas fa-graduation-cap"></i> College: <span th:text="${user.college}"></span></li>
	                <li><i class="fas fa-info-circle"></i> Bio: <span th:text="${user.bio}"></span></li>
	            </ul>
	
	            <div class="social-links">
	                <p><i class="fab fa-linkedin"></i> <a th:href="${user.linkedIn}" target="_blank">LinkedIn</a></p>
	                <p><i class="fab fa-github"></i> <a th:href="${user.gitHub}" target="_blank">GitHub</a></p>
	            </div>
	            
	              <div class="edit">
						<a href="/openEditProfile"><button>Edit profile <i class="fas fa-edit"></i></button> </a>
	   			 </div>
	        </div>
	        <hr>
	        	<div class="post-display">
	        		<span th:each="post : ${myPosts}">
	            		<div class="post-card">
	              			<img th:if="${post.photoBase64}" 
	                             th:src="'data:image/jpeg;base64,' + ${post.photoBase64}" 
	                             alt="User Photo" />
	                    </div>
	          	</div>
	   	 </div>
	</body>
	<script>
		function openModal() {
		    document.getElementById('imageModal').style.display = "block";
		    document.getElementById('fullImage').src = document.querySelector('.profile-picture img').src;
		}
		
		function closeModal() {
		    document.getElementById('imageModal').style.display = "none";
		}
	</script>
</html>